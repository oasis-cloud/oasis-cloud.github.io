<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ç³»ç»Ÿç¼–ç¨‹</title>
        <link rel="stylesheet" href="../../assets/fonts.css">
        <link rel="stylesheet" href="../../assets/graphite.css">
        <link rel="stylesheet" href="../../assets/pygments.css">
        
        
    </head>
    <body class="node-articles-software-design-1 node-articles-software-design node-articles node">
        <header class="masthead">
            <h1><a href="../../index.html">Oasis's Cloud</a></h1>
            
                <p class="tagline">â˜ï¸ğŸŒµï¸â˜ï¸ğŸŒµï¸â˜ï¸ğŸŒµâ˜ï¸ğŸŒµï¸â˜ï¸ğŸŒµï¸â˜ï¸ğŸŒµâ˜ï¸ğŸŒµ</p>
            
            
            <nav class="menu">
                <input id="menu-check" type="checkbox"/>
                <label id="menu-label" for="menu-check" class="unselectable">
                    <span class="icon close-icon">âœ•</span>
                    <span class="icon open-icon">â˜°</span>
                    <span class="text">Menu</span>
                </label>
                <ul>
<li><a href="../../index.html">é¦–é¡µ</a></li>
</ul>
            </nav>
        </header>
        <article class="main">
            <header class="title">
                <h1>ç³»ç»Ÿç¼–ç¨‹</h1>
                
                    <p class="subtitle">ã€Šè½¯ä»¶è®¾è®¡ã€‹é˜…è¯»ç¬”è®°ä¸€</p>
                
                <hr>
            </header>
            <h2>èƒŒæ™¯ç®€è¿°</h2>
<p>æœ¬ç« å†…å®¹ä¸»è¦å›´ç»•è¿™ JavaScript çš„å¼‚æ­¥ç‰¹æ€§å±•å¼€ã€‚å¼‚æ­¥ç‰¹æ€§ä¹Ÿæ˜¯ JavaScript äºå…¶ä»–è¯­è¨€çš„æœ€å¤§å·®åˆ«ã€‚JavaScript ä¸­çš„å¼‚æ­¥å¤„ç†ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ I/O é—®é¢˜ã€‚å› ä¸º I/O çš„å¤„ç†æ—¶éœ€è¦ CPU éœ€è¦ç­‰å¾…ã€‚I/O æ‰€è€—è´¹çš„æ—¶é—´å’Œ CPU æ¯”èµ·æ¥å¯ä»¥è¯´æ˜¯å¤©å£¤åœ°åˆ«ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹æ—¶é—´çš„æ¦‚å¿µï¼š</p>
<p>JavaScript åœ¨åˆæœŸå¯ä»¥é€šè¿‡ <code>Callback</code> æ–¹å¼å®ç°å¼‚æ­¥ã€‚ES6 ç‰ˆæœ¬ä¹‹åå·²ç»æ·»åŠ äº† Promiseã€async awaitã€‚</p>
<h2>åˆ—å‡ºç›®å½•</h2>
<p>ä»£ç  1ï¼š
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;fs&#39;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">srcDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="nx">srcDir</span><span class="p">)</span><span class="w"></span>
<span class="k">for</span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">results</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>æ¦‚å¿µè§£æï¼š</p>
<ol>
<li>process æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>node.js ä¸­ process å¯¹è±¡æä¾›äº†å½“å‰ node.js è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚argv æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯åŠ¨ node.js è¿›ç¨‹æ—¶çš„å‘½ä»¤è¡Œå‚æ•°</li>
<li>node test.js -a describe1</li>
<li>process.argv[0] æ˜¯ bin æ–‡ä»¶çš„è·¯å¾„ /usr/local/bin/node</li>
<li>process.argv[1] æ˜¯ æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ test.js</li>
<li>process.argv[2] æ˜¯ å‚æ•° -a</li>
<li>process.argv[2] æ˜¯ å‚æ•° describe1</li>
<li>node.js å¯ä»¥ä½¿ç”¨ import å—ï¼Ÿ</li>
<li>node.js é»˜è®¤ä½¿ç”¨ require æ–¹å¼ï¼Œå¦‚æœé‡‡ç”¨ import æ–¹å¼çš„è¯ï¼Œéœ€è¦å°† package.json æ–‡ä»¶ä¸­çš„ type è®¾ç½®ä¸º module</li>
</ol>
<p>ä»£ç  1 å¹¶ä¸ä¼šæ­£å¸¸å·¥ä½œï¼Œè€Œæ˜¯ä¼šæŠ¥é”™ï¼šCallback muse be a functionã€‚æ‰€ä»¥éœ€è¦ç»™å®ƒæ·»åŠ ä¸€ä¸ª functionï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p>
<p>åœ¨ Node.js ä¸­æœ‰è¿™æ ·ä¸€ä¸ªè§‚å¿µéœ€è¦æ˜ç¡®ï¼šé”™è¯¯å…ˆè¡Œã€‚è‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬çœ‹å¦‚ä¸‹ä¸‰ä¸ªè®ºç‚¹ã€‚</p>
<ol>
<li>ä»»ä½•ä¸€ä¸ªç¨‹åºè‡³å°‘åŒ…å«ä¸€ä¸ª bug</li>
<li>ä»»ä½•ä¸€ä¸ªç¨‹åºå¯ä»¥ç¼©çŸ­ä¸€è¡Œã€‚</li>
<li>å› æ­¤ï¼Œä»»ä½•ä¸€ä¸ªç¨‹åºå¯ä»¥ç®€åŒ–ä¸ºä¸€æ¡é”™è¯¯è¯­å¥ã€‚</li>
</ol>
<p>ä»£ç  2ï¼š
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;fs&#39;</span><span class="w"> </span>

<span class="kd">const</span><span class="w"> </span><span class="nx">listContents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">files</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">srcDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="nx">srcDir</span><span class="p">,</span><span class="w"> </span><span class="nx">listContents</span><span class="p">)</span><span class="w"></span>
</code></pre></div></p>
<h2>é€‰æ‹©ä¸€ç»„æ–‡ä»¶</h2>
<p>åœ¨å¾ˆå¤š node.js é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ° glob æ¨¡å—ã€‚glob æ˜¯ &ldquo;global&rdquo; çš„ç¼©å†™ã€‚glob æ˜¯ä¸€ä¸ªå¤è€çš„ Unix æœ¯è¯­ï¼Œç”¨äºæŒ‰åç§°åŒ¹é…ä¸€ç»„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºè®¾è®¡ä¸­å¾ˆå¤šæ¦‚å¿µæ˜¯ç›¸åŒçš„ï¼Œæˆ–è€…å¾ˆå¤šç°æœ‰æ€æƒ³æ˜¯å¯ä»¥å€Ÿé‰´çš„ã€‚</p>
<p>æ¦‚å¿µè§£æï¼š</p>
<ol>
<li>npm glob</li>
<li>https://www.npmjs.com/package/glob</li>
<li>https://man7.org/linux/man-pages/man3/fnmatch.3.html</li>
<li>https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html</li>
<li>https://www.linuxjournal.com/content/pattern-matching-bash</li>
</ol>
        </article>
        
    </body>
</html>
