---
title: GitHub Action æœ¬åœ°æµ‹è¯•
tags: [Programming Design]
author: oasis
date: 2023-04-14
---

é€šè¿‡ GitHub Action å¯ä»¥è¿›è¡Œ CI/CDï¼Œä½†æ˜¯æ¯æ¬¡çš„ä¿®æ”¹éœ€è¦åœ¨ GitHub ä¸Šå‡ºå‘ç›¸åº”çš„åŠ¨ä½œæ¥è¿›è¡Œæµ‹è¯•ï¼Œæ‹¿ push çš„å¤„ç†æ¥è¯´æ˜ã€‚
é¦–å…ˆè¦åœ¨æœ¬åœ°ä»“åº“ä¸­æäº¤ä»£ç ï¼Œç„¶å push ä»£ç åˆ° GitHubï¼ŒGitHub æ£€æµ‹åˆ°ç›¸åº”çš„ push åŠ¨ä½œï¼Œå¤„ç† Actionsï¼ŒActions æ‰§è¡Œå‡ºé”™ï¼Œéœ€è¦åœ¨ GitHub Actions æŸ¥çœ‹æ—¥å¿—ã€‚ä¿®å¤åé‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚

[act](https://GitHub.com/nektos/act) å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯ act è·å¾— 37.3k star çš„åŸå› ä¹‹ä¸€ã€‚è§£å†³äº†å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„é‡åˆ°çš„ç—›ç‚¹é—®é¢˜ã€‚

act å¯¹ä¸ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ act ç»™å‡ºäº†ä¸¤ä¸ªåŸå› ï¼š

1. å¿«é€Ÿåé¦ˆï¼Œä¸å¿…æäº¤æ¨é€ workflowsã€‚å¹¶ä¸”æä¾›äº†ä¸ GitHub ç›¸åŒçš„ç¯å¢ƒå˜é‡å’Œæ–‡ä»¶ç³»ç»Ÿ
2. æœ¬åœ°ä»»åŠ¡ç®¡ç†ï¼Œå¯ä»¥ä½¿ç”¨ workflows æ›¿æ¢ Makefile

act æ˜¯ä¸€æ¬¾åŸºäº docker çš„è½¯ä»¶ï¼Œæ‰€ä»¥å®‰è£… act ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå» docker çš„ç«™ç‚¹ä¸‹è½½ dockerã€‚

ä¹‹åé€šè¿‡ act æä¾›çš„å®‰è£…æ–¹å¼è¿›è¡Œ act çš„å®‰è£…ã€‚

åœ¨æ‰§è¡Œ act çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š

```shell
ERRO[0000] failed to obtain container engine info: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? 
[CI/test] ğŸš€  Start image=catthehacker/ubuntu:act-18.04
[CI/test]   ğŸ³  docker pull image=catthehacker/ubuntu:act-18.04 platform=linux/amd64 username= forcePull=true
Error: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?

```

åœ¨ docker çš„è®¾ç½®ä¸­ `docker > Settings > Advanced > Enable default Docker socket` å¼€å¯æ­¤é€‰é¡¹ï¼Œä¾¿å¯ä»¥è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚

è§£å†³å®Œä¸Šé¢çš„é—®é¢˜ï¼Œä¾¿å¯ä»¥é€šè¿‡ act è¿›è¡Œæµ‹è¯•äº†ã€‚act çš„å¸¸ç”¨å‚æ•°æœ‰ï¼š

act [<äº‹ä»¶>] -j [workflow çš„æ–‡ä»¶å]

act åŒæ—¶æä¾›äº† .actrc æ–‡ä»¶æ¥è®¾ç½®é»˜è®¤çš„é…ç½®é¡¹ï¼ˆPSï¼šåœ¨å¼€å‘ cli ç¨‹åºçš„æ—¶å€™ä¹Ÿå¯ä»¥è€ƒè™‘åŠ ä¸Šç±»ä¼¼çš„åŠŸèƒ½ï¼‰ï¼Œä¸‹é¢æ˜¯æˆ‘è®¾ç½®çš„é…ç½®é¡¹ï¼š

```shell
-P ubuntu-latest=catthehacker/ubuntu:act-18.04
--container-architecture linux/amd64
```


