---
title: "Toast 组件在 Taro 中实现函数调用的方法"
author: oasis
date: 2023-08-28
tags: [JS, JS Tools]
---

## 背景

在 NutUI React Taro 1.x 的实现中，由于微信小程序下不能动态插入标签，所以 NutUI React Taro 中的 Toast 组件采用的是标签方式的使用方法。

然而 Toast 标签的使用方式比较繁琐。此用法如下所示：

```js
import React, {useState} from 'react'
import {Toast} from '@/packages/nutui.react.taro'

function Demo() {
  const [showToast, setShowToast] = useState(false)
  
  return (
    <Toast
      msg={'标签'}
      visible={showToast}
      onClose={() => {
        setShowToast(false)
      }}
    />
  )
}
```

在这个例子中，需要通过增加 state 的方法，来控制 Toast 组件的 visible，从而实现 toast 展示或隐藏。现在仅仅是控制 Toast 的显示或隐藏，在实际的业务中，还需要控制 Toast 的类型，Toast 的 msg。这样就需要增加多个 state。而标签组件的使用方式在进行需要处理跨组件的通信。从而进一步增加 Toast 的使用难度。

能不能通过给 Toast 增加 show() 方法来控制 Toast 的展示？

```js
function OtherComponent() {
  return <Toast />
}
function Demo() {
  return (
    <Button onClick={() => Toast.open()}>Click me</Button>
  )
}
```

## 实现
